{% if sortable is not null %}
<script type="text/javascript">
    $(document).ready(function(){
        $("#{{ id ~ '_files_list' }}").sortable({
            helper: function(e, tr) {
                // lock cell widths
                tr.children().each(function() {
                    $(this).css('width', $(this).width());
                });
                return tr;
            },
            cancel: "a, button, img, input, textarea, select",
            items: "> tr.template-download",
            update: function(e, ui) {
                // unlock cell widths
                ui.item.children().each(function() {
                    $(this).css('width', '');
                });
                // update sortable positions
                $('[id^="{{ id }}"][id$="{{ sortable }}"]').each(function(i){
                    $(this).val(i);
                });
            }
        });
    });
</script>
{% endif %}
