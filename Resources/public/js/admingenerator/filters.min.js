;!function(e,t,n){function o(t,n){this.element=t,this.$element=e(t),this.options=e.extend({},r,n),this._defaults=r,this._name=i,this._init()}var i="agen$filters",r=(t.document,{});o.prototype={_init:function(){var t=this;t.selector={group:'[role="filters-group"]',list:'[role="filters-group-list"]',toggle:'[data-toggle="collapse"]',dismiss:'[data-dismiss="filters-group"]',counter:'[role="counter"]'},t.$root=t.$element.find("#"+t.element.id+"-filters-root-list"),t.$resetBtn=t.$element.find("#"+t.element.id+"-filters-btn-reset"),t.$addBtn=t.$element.find("#"+t.element.id+"-filters-btn-add"),t.vars={index:t.$root.children(t.selector.group).length,prototype:t.$root.data("prototype")},t.$root.children(t.selector.group).each(function(e,n){t._enableToggle(n),t._enableDismiss(n)}),t.$resetBtn.on("click",function(e){e.preventDefault(),t.$root.children(t.selector.group).remove(),t.vars.index=0}),t.$addBtn.on("click",function(n){n.preventDefault();var o=e(t.vars.prototype.replace(/__name__/g,t.vars.index)),i=o.find(t.selector.panel);t.vars.index++,t.$root.append(o),t._enableToggle(o),t._enableDismiss(o),i.collapse({parent:t.$root})})},_enableToggle:function(e){var t=this,n=e.find(t.selector.toggle),o=e.find(t.selector.panel);n.on("click",function(e){e.preventDefault(),o.collapse("toggle")})},_enableDismiss:function(e){var t=this,n=e.find(t.selector.dismiss),o=e.find(t.selector.panel);n.on("click",function(n){n.preventDefault();var i=o.hasClass("in"),r=e.siblings(t.selector.group),l=e.nextAll(t.selector.group),s=$newGroup.prev(t.selector.group),a=$newGroup.next(t.selector.group);e.remove(),t.vars.index--,l.each(function(e,n){var o=r.index(n),i=n.find(t.selector.toggle),l=n.find(t.selector.panel),s=l.attr("id"),a=s.replace(/\d+-filters-group$/g,o+"-filters-group");i.attr("href",a),l.attr("id",a),i.find(t.selector.counter).html(o)}),i&&(a.length?a.find(t.selector.list).collapse("show"):s.find(t.selector.list).collapse("show"))})}},e.fn[i]=function(t){var r=arguments;if(t===n||"object"==typeof t)return this.each(function(){e.data(this,"plugin_"+i)||e.data(this,"plugin_"+i,new o(this,t))});if("string"==typeof t&&"_"!==t[0]&&"init"!==t){var l;return this.each(function(){var n=e.data(this,"plugin_"+i);n instanceof o&&"function"==typeof n[t]&&(l=n[t].apply(n,Array.prototype.slice.call(r,1))),"destroy"===t&&e.data(this,"plugin_"+i,null)}),l!==n?l:this}}}(jQuery,window);